{"version":3,"sources":["../../src/controllers/coupons.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\nimport { Container } from 'typedi';\nimport { CreateCouponDto } from '@dtos/coupons.dto';\nimport { Coupon } from '@interfaces/coupons.interface';\nimport { CouponService } from '@services/coupons.service';\n\nexport class CouponController {\n  private couponService = Container.get(CouponService);\n\n  public getCoupons = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\n    try {\n      const coupons: Coupon[] = await this.couponService.findAllCoupon();\n      res.status(200).json({ data: coupons, message: 'findAll' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public getCouponById = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\n    try {\n      const couponId = Number(req.params.id);\n      const coupon: Coupon = await this.couponService.findCouponById(couponId);\n      res.status(200).json({ data: coupon, message: 'findOne' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public createCoupon = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\n    try {\n      const couponData: CreateCouponDto = req.body;\n      const newCoupon: Coupon = await this.couponService.createCoupon(couponData);\n      res.status(201).json({ data: newCoupon, message: 'created' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public updateCoupon = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\n    try {\n      const couponId = Number(req.params.id);\n      const couponData: CreateCouponDto = req.body;\n      const updatedCoupon: Coupon = await this.couponService.updateCoupon(couponId, couponData);\n      res.status(200).json({ data: updatedCoupon, message: 'updated' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public deleteCoupon = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\n    try {\n      const couponId = Number(req.params.id);\n      const deletedCoupon: Coupon = await this.couponService.deleteCoupon(couponId);\n      res.status(200).json({ data: deletedCoupon, message: 'deleted' });\n    } catch (error) {\n      next(error);\n    }\n  };\n}\n"],"names":["CouponController","couponService","Container","get","CouponService","getCoupons","req","res","next","coupons","findAllCoupon","status","json","data","message","error","getCouponById","couponId","Number","params","id","coupon","findCouponById","createCoupon","couponData","body","newCoupon","updateCoupon","updatedCoupon","deleteCoupon","deletedCoupon"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBALa;gCAGI;;;;;;;;;;;;;;AAEvB,IAAA,AAAMA,mBAAN,MAAMA;;QACX,uBAAQC,iBAAgBC,iBAAS,CAACC,GAAG,CAACC,6BAAa;QAEnD,uBAAOC,cAAa,OAAOC,KAAcC,KAAeC;YACtD,IAAI;gBACF,MAAMC,UAAoB,MAAM,IAAI,CAACR,aAAa,CAACS,aAAa;gBAChEH,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMJ;oBAASK,SAAS;gBAAU;YAC3D,EAAE,OAAOC,OAAO;gBACdP,KAAKO;YACP;QACF;QAEA,uBAAOC,iBAAgB,OAAOV,KAAcC,KAAeC;YACzD,IAAI;gBACF,MAAMS,WAAWC,OAAOZ,IAAIa,MAAM,CAACC,EAAE;gBACrC,MAAMC,SAAiB,MAAM,IAAI,CAACpB,aAAa,CAACqB,cAAc,CAACL;gBAC/DV,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMQ;oBAAQP,SAAS;gBAAU;YAC1D,EAAE,OAAOC,OAAO;gBACdP,KAAKO;YACP;QACF;QAEA,uBAAOQ,gBAAe,OAAOjB,KAAcC,KAAeC;YACxD,IAAI;gBACF,MAAMgB,aAA8BlB,IAAImB,IAAI;gBAC5C,MAAMC,YAAoB,MAAM,IAAI,CAACzB,aAAa,CAACsB,YAAY,CAACC;gBAChEjB,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMa;oBAAWZ,SAAS;gBAAU;YAC7D,EAAE,OAAOC,OAAO;gBACdP,KAAKO;YACP;QACF;QAEA,uBAAOY,gBAAe,OAAOrB,KAAcC,KAAeC;YACxD,IAAI;gBACF,MAAMS,WAAWC,OAAOZ,IAAIa,MAAM,CAACC,EAAE;gBACrC,MAAMI,aAA8BlB,IAAImB,IAAI;gBAC5C,MAAMG,gBAAwB,MAAM,IAAI,CAAC3B,aAAa,CAAC0B,YAAY,CAACV,UAAUO;gBAC9EjB,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMe;oBAAed,SAAS;gBAAU;YACjE,EAAE,OAAOC,OAAO;gBACdP,KAAKO;YACP;QACF;QAEA,uBAAOc,gBAAe,OAAOvB,KAAcC,KAAeC;YACxD,IAAI;gBACF,MAAMS,WAAWC,OAAOZ,IAAIa,MAAM,CAACC,EAAE;gBACrC,MAAMU,gBAAwB,MAAM,IAAI,CAAC7B,aAAa,CAAC4B,YAAY,CAACZ;gBACpEV,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMiB;oBAAehB,SAAS;gBAAU;YACjE,EAAE,OAAOC,OAAO;gBACdP,KAAKO;YACP;QACF;;AACF"}