{"version":3,"sources":["../../src/database/index.ts"],"sourcesContent":["import Sequelize from 'sequelize';\nimport { NODE_ENV, DB_HOST, DB_PORT, DB_USER, DB_PASSWORD, DB_DATABASE } from '@config';\nimport { logger } from '@utils/logger';\n\nimport UserModel from '@models/users.model';\nimport CouponModel from '@models/coupons.model';\n\nconst sequelize = new Sequelize.Sequelize(DB_DATABASE, DB_USER, DB_PASSWORD, {\n  host: DB_HOST,\n  port: Number(DB_PORT),\n  dialect: 'mysql',\n  timezone: '+09:00',\n  define: {\n    charset: 'utf8mb4',\n    collate: 'utf8mb4_general_ci',\n    underscored: true,\n    freezeTableName: true,\n  },\n  pool: {\n    max: 5,\n    min: 0,\n  },\n  logQueryParameters: NODE_ENV === 'development',\n  logging: (query, time) => logger.info(`${time}ms ${query}`),\n  benchmark: true,\n});\n\nsequelize\n  .authenticate()\n  .then(() => logger.info('Database connection successful.'))\n  .catch(err => logger.error('Database connection failed:', err));\n\nexport const DB = {\n  Users: UserModel(sequelize),\n  Coupons: CouponModel(sequelize),\n  sequelize,\n  Sequelize,\n};\n"],"names":["DB","sequelize","Sequelize","DB_DATABASE","DB_USER","DB_PASSWORD","host","DB_HOST","port","Number","DB_PORT","dialect","timezone","define","charset","collate","underscored","freezeTableName","pool","max","min","logQueryParameters","NODE_ENV","logging","query","time","logger","info","benchmark","authenticate","then","catch","err","error","Users","UserModel","Coupons","CouponModel"],"mappings":";;;;+BAgCaA;;;eAAAA;;;kEAhCS;wBACwD;wBACvD;mEAED;qEACE;;;;;;AAExB,MAAMC,YAAY,IAAIC,kBAAS,CAACA,SAAS,CAACC,mBAAW,EAAEC,eAAO,EAAEC,mBAAW,EAAE;IAC3EC,MAAMC,eAAO;IACbC,MAAMC,OAAOC,eAAO;IACpBC,SAAS;IACTC,UAAU;IACVC,QAAQ;QACNC,SAAS;QACTC,SAAS;QACTC,aAAa;QACbC,iBAAiB;IACnB;IACAC,MAAM;QACJC,KAAK;QACLC,KAAK;IACP;IACAC,oBAAoBC,gBAAQ,KAAK;IACjCC,SAAS,CAACC,OAAOC,OAASC,cAAM,CAACC,IAAI,CAAC,GAAGF,KAAK,GAAG,EAAED,OAAO;IAC1DI,WAAW;AACb;AAEA3B,UACG4B,YAAY,GACZC,IAAI,CAAC,IAAMJ,cAAM,CAACC,IAAI,CAAC,oCACvBI,KAAK,CAACC,CAAAA,MAAON,cAAM,CAACO,KAAK,CAAC,+BAA+BD;AAErD,MAAMhC,KAAK;IAChBkC,OAAOC,IAAAA,mBAAS,EAAClC;IACjBmC,SAASC,IAAAA,qBAAW,EAACpC;IACrBA;IACAC,WAAAA,kBAAS;AACX"}